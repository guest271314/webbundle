<!DOCTYPE html>

<html>
  <head> </head>
  <script type="importmap">
    {
      "imports": {
        "Buffer": "https://gist.githubusercontent.com/guest271314/08b19ba88c98a465dd09bcd8a04606f6/raw/f7ae1e77fb146843455628042c8fa47aec2644eb/buffer-bun-bundle.js",
        "base32-encode": "https://esm.sh/base32-encode@2.0.0",
        "cborg": "https://esm.sh/cborg@1.10.2",
        "commander": "https://esm.sh/commander@4.1.1",
        "mime": "https://esm.sh/mime@2.6.0",
        "to-data-view": "https://esm.sh/to-data-view@2.0.0",
        "wbn": "https://esm.sh/wbn@0.0.9",
        "wbn-sign-webcrypto": "./wbn-sign.js",
        "zod": "https://esm.sh/zod@3.22.4"
      }
    }
  </script>
  <script type="module">
    for (const reg of await navigator.serviceWorker.getRegistrations()) {
      await reg.unregister();
    }
    const sw = await navigator.serviceWorker.register(
      'sw.js?=' + new Date().getTime(),
      {
        scope: './',
        updateViaCache: 'none',
      }
    );

    const { resolve, promise } = Promise.withResolvers();
    navigator.serviceWorker.addEventListener('controllerchange', (e) => {
      console.log(e.type);
      resolve();
    });
    await promise;
    /*
    const { Buffer } = await import('Buffer');

    import * as cborg from 'cborg';
    import * as base32Encode from 'base32-encode';
    // import * as commander from "commander";
    import mime from 'mime';
    import toDataView from 'to-data-view';
    import * as wbn from 'wbn';
    import * as zod from 'zod';
    const wbnSign = await import('wbn-sign-webcrypto');
    console.log({ Buffer, cborg, mime, toDataView, wbn, wbnSign });
*/
  </script>

  <body>
    <h1>Bundle</h1>
  <script type="module" src="./index.js"></script>
  </body>
</html>
